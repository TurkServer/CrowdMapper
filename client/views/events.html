
<template name="events">
    <div id="events">
        <table class="table table-condensed table-hover table-striped">
            <thead>
            <tr>
                <th>Province</th>
                <th>Region</th>
                <th>Type</th>
                <th>Description</th>
                <th>Sources</th>
                <th>Location</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            {{#each eventRecords}}
            {{> eventRow}}
            {{/each}}
            </tbody>
        </table>
    </div>
    <a href="#" class="btn button-newevent">Create New Event</a>
</template>

<template name="eventRow">
    <tr {{#if editing}} class="info" {{/if}}>

        {{eventCell this "province" iAmEditing}}
        {{eventCell this "region" iAmEditing}}
        {{eventCell this "type" iAmEditing}}
        {{eventCell this "description" iAmEditing}}
        {{eventCell this "sources" iAmEditing}}

        <td><div>
        {{#if location}}
            {{formatLocation}}
        {{else}}
            <button class="btn btn-mini btn-info button-locate">Locate</button>
        {{/if}}
        </div></td>

        <td>
        {{#if editing}}
            {{#if iAmEditing}}
                <a href="#" class="btn btn-mini btn-success button-save">Save</a>
            {{else}}
                {{> userPill editorUser}} is editing
            {{/if}}
        {{else}}
            <a href="#" class="btn btn-mini btn-warning button-edit">Edit</a>
            <a href="#" class="btn btn-mini btn-danger button-delete">Delete</a>
        {{/if}}
        </td>
    </tr>
</template>

<template name="_eventCell">
    <td><div data-ref="{{field}}" class="{{#if editable}}editable{{/if}}">
        {{value}}
    </div></td>
</template>
